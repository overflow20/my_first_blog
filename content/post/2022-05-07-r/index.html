---
title: "Ræ¯æ—¥éšå¿ƒè®°"
author: "zyy"
date: '2022-05-07'
slug: r
categories: []
tags: []
---



<p>è¿™ä¸‰ç§è¯­è¨€è¯´ç†Ÿæ‚‰ä¹Ÿç†Ÿæ‚‰ï¼Œä½†æ€»è§‰å¾—ç¼ºä¹ä¸€ç§ç³»ç»Ÿæ„Ÿï¼Œé‚£å°±æ¯å¤©èŠ±ç‚¹æ—¶é—´æµè§ˆä¸€äº›ä¹¦ç±è®°å½•ä¸€ä¸‹å§ï¼</p>
<p>ä¹¦ç±åˆ—è¡¨(æ›´æ–°ä¸­)ï¼š</p>
<ul>
<li>Rè¯­è¨€å®æˆ˜(ç¬¬2ç‰ˆ)</li>
<li><a href="https://bookdown.org/xiangyun/msg/">ç°ä»£ç»Ÿè®¡å›¾å½¢</a></li>
</ul>
<pre class="r"><code>knitr::opts_chunk$set(echo = T,collapse = T,
                      results = &quot;hide&quot;)</code></pre>
<div id="section" class="section level2">
<h2>5.28</h2>
<ul>
<li>ç­‰é«˜çº¿</li>
<li>æ¡ä»¶åˆ†å¸ƒ</li>
<li>ä¸€å…ƒå‡½æ•°æ›²çº¿</li>
</ul>
<pre class="r"><code>par(par(mar = c(4.5, 4, 0.2, 0.2)), mfrow = c(2, 1))
chippy &lt;- function(x) sin(cos(x) * exp(-x / 2))
curve(chippy, -8, 7, n = 2008, xlab = &quot;$x$&quot;, ylab = &quot;$\\mathrm{chippy}(x)$&quot;)
curve(sin(x) / x, from = -20, to = 20, n = 200, 
      xlab = &quot;$t$&quot;, ylab = &quot;$\\varphi_{X}(t)$&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
</div>
<div id="section-1" class="section level2">
<h2>5.27</h2>
<p>ä»¥åä»¥æ—¥æœŸä¸ºå‡†ï¼Œä¸ä»¥ä»Šå¤©ã€æ˜å¤©è¿™æ ·å«ç³Šçš„è¯è¯­</p>
<pre class="r"><code>(x &lt;- margin.table(HairEyeColor, c(1, 2)))
assocplot(x)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
<div id="section-2" class="section level2">
<h2>5.26</h2>
<ul>
<li><p>ç®±çº¿å›¾ï¼ˆboxplotï¼‰</p></li>
<li><p>æ¡å½¢å›¾</p></li>
</ul>
<pre class="r"><code>library(RColorBrewer) # ç”¨åˆ†ç±»è°ƒè‰²æ¿
par(mfrow = c(2, 1), mar = c(3, 2.5, 0.5, 0.1))
death &lt;- t(VADeaths)[, 5:1]
barplot(death, col = brewer.pal(4, &quot;Set1&quot;))
barplot(death,
  col = brewer.pal(4, &quot;Set1&quot;), beside = TRUE,
  legend.text = TRUE
)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-3-1.png" width="672" />
- æ•£ç‚¹å›¾</p>
<pre class="r"><code>demo(&quot;alphaDemo&quot;, package = &quot;MSG&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
<div id="section-3" class="section level2">
<h2>5.25</h2>
<ul>
<li>bootstrapæ–¹æ³•</li>
</ul>
<pre class="r"><code>x=c(18.2,9.5,12.0,21.1,10.2)
theta&lt;-median(x)
bootstrap&lt;-function(x,B=10000){
        set.seed(123)
        G&lt;-matrix(0,B,length(x))
        for(i in 1:B){
                G[i,]&lt;-t(matrix(sample(x,length(x),replace = T)))
        }
        return(G)
}
#è¿è¡Œæ—¶é—´
tic&lt;-proc.time()
b&lt;-matrix(apply(bootstrap(x),1,median),1)
toc&lt;-proc.time()
print(toc-tic)
#è¯¯å·®è®¡ç®—
(sd&lt;-sqrt(((b)-mean(b))%*%(t(b)-mean(b))/(length(b)-1)))
(mean(b))</code></pre>
<ul>
<li>èŒå¶å›¾ï¼ˆStem-and-Leaf Plotï¼‰</li>
</ul>
<pre class="r"><code>head(islands, 10)#è¯¥æ•°æ®è®°å½•äº†ä¸–ç•Œä¸Šå„å¤§é™†åœ°å—çš„é¢ç§¯å¤§å°ï¼ŒåŸå§‹æ•°æ®å‰ 10 æ¡å¦‚ä¸‹ï¼ˆå•ä½ï¼šåƒå¹³æ–¹è‹±é‡Œï¼‰
stem(islands)
# å‡å€¼ lambda ä¸º 10 çš„æ³Šæ¾åˆ†å¸ƒéšæœºæ•°
sort(x &lt;- rpois(80, lambda = 10))
stem(x, scale = 2)</code></pre>
</div>
<div id="section-4" class="section level2">
<h2>5.23</h2>
<p>peer pressure</p>
<ul>
<li>ç›´æ–¹å›¾ï¼ˆHistogramï¼‰</li>
</ul>
<pre class="r"><code>par(mfrow = c(2, 2), mar = c(2, 3, 2, .5), mgp = c(2, .5, 0))
data(geyser, package = &quot;MASS&quot;)
hist(geyser$waiting, main = &quot;(1) freq = TRUE&quot;, xlab = &quot;waiting&quot;)
hist(geyser$waiting, freq = FALSE, xlab = &quot;waiting&quot;, main = &quot;(2) freq = FALSE&quot;)
hist(geyser$waiting, breaks = 5, density = 10, xlab = &quot;waiting&quot;, main = &quot;(3) breaks = 5&quot;)
hist(geyser$waiting, breaks = 40, col = &quot;red&quot;, xlab = &quot;waiting&quot;, main = &quot;(4) breaks = 40&quot;)

library(ggplot2)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<pre class="r"><code>library(cowplot)
## Warning: ç¨‹è¾‘åŒ…&#39;cowplot&#39;æ˜¯ç”¨Rç‰ˆæœ¬4.0.5 æ¥å»ºé€ çš„
p &lt;- ggplot(aes(waiting), data = geyser)
p1 &lt;- p + geom_histogram(breaks = seq(40, 110, by = 5))
p2 &lt;- p + geom_histogram(breaks = seq(40, 110, by = 5), aes(y = ..density..))
p3 &lt;- p + geom_histogram(breaks = seq(40, 110, by = 10))
p4 &lt;- p + geom_histogram(breaks = seq(42, 108, by = 2), fill = &quot;red&quot;, color = &quot;black&quot;)
plot_grid(p1, p2, p3, p4, labels = c(
  &quot;(1) freq = TRUE&quot;,
  &quot;(2) freq = FALSE&quot;,
  &quot;(3) breaks = 5&quot;,
  &quot;(4) breaks = 40&quot;
), ncol = 2)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-7-2.png" width="672" /></p>
<pre class="r"><code>demo(&quot;hist_geyser&quot;, package = &quot;MSG&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<pre class="r"><code>df &lt;- data.frame(
  x = seq(40, 110, 5), y = 0,
  xend = seq(40, 110, 5), yend = ht
)
p2 + geom_density(fill = &quot;lightgray&quot;, color = &quot;black&quot;) +
  geom_segment(aes(x = x, y = y, xend = xend, yend = yend),
    data = df, lty = 3
  )</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-8-2.png" width="672" /></p>
</div>
<div id="section-5" class="section level2">
<h2>5.21</h2>
<ul>
<li>ç€‘å¸ƒå›¾</li>
</ul>
<pre class="r"><code># ä¸ƒå¤©ä¹‹å†…çš„å”¯ä¸€è®¿é—®æ¬¡æ•°æ•°æ®ï¼ˆå‘¨ä¸€ä¸º 2010 å¹´ 8 æœˆ 2 æ—¥ï¼‰
auv &lt;- c(939, 1005, 973, 910, 875, 658, 688)
# ç›¸é‚»ä¸¤å¤©ä½œå·®
diff(auv)
par(mar = c(4, 4, .5, .1))
plot(auv,
  xlab = &quot;å…«æœˆç¬¬ä¸€å‘¨&quot;,
  ylab = &quot;ç»å¯¹å”¯ä¸€è®¿é—®æ¬¡æ•°&quot;, type = &quot;n&quot;,
  xlim = c(0.5, 7.5),
  ylim = c(0, max(auv)),
  xaxt = &quot;n&quot;, panel.first = grid()
)
axis(1, 1:7, sprintf(&quot;å‘¨%s&quot;, c(
  &quot;ä¸€&quot;, &quot;äºŒ&quot;, &quot;ä¸‰&quot;, &quot;å››&quot;, &quot;äº”&quot;, &quot;å…­&quot;, &quot;æ—¥&quot;
)))
rect(1:7 - 0.3, c(0, auv[1:6]), 1:7 + 0.3, auv,
  col = c(NA, ifelse(diff(auv) &lt; 0, &quot;red&quot;, NA))
)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<ul>
<li>SGD</li>
</ul>
<pre class="r"><code># æœ¬ä¾‹çš„ç›®æ ‡å‡½æ•°ä¹Ÿå¯ä»¥ç”¨ R è‡ªèº«çš„ optim() å‡½æ•°æ¥æ±‚æå°å€¼ï¼Œå®ƒçš„æ”¶æ•›ä»£ç ä¸º 0ï¼Œè¡¨ç¤ºè¿™ä¸ªè®¡ç®—ç»“æœåœ¨ä¸€å®šæ¡ä»¶ä¸‹å¯ä»¥æ”¶æ•›ï¼ˆä½†ä¸ä»£è¡¨æ‰¾åˆ°äº†å…¨å±€æœ€å°å€¼ï¼Œç”šè‡³ä¸ä»£è¡¨æ‰¾åˆ°äº†å±€éƒ¨æœ€å°å€¼ï¼‰
f2 &lt;- function(x) sin(1 / 2 * x[1]^2 - 1 / 4 * x[2]^2 + 3) *
    cos(2 * x[1] + 1 - exp(x[2]))
# par ä¸ºå±€éƒ¨è§£ï¼›value ä¸ºç›®æ ‡å‡½æ•°å€¼ï¼› convergence ä¸ºæ”¶æ•›æŒ‡ç¤ºä»£ç 
optim(c(-.9, .9), f2, method = &quot;L-BFGS-B&quot;, lower = c(-1, .5), upper = c(1, 2.2))</code></pre>
<pre class="r"><code>demo(&quot;gradArrows1&quot;, package = &quot;MSG&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</div>
<div id="section-6" class="section level2">
<h2>5.20</h2>
<ul>
<li>çŸ©å½¢ã€å¤šè¾¹å½¢</li>
</ul>
<pre class="r"><code>x &lt;- rnorm(40) # äº§ç”Ÿ 40 ä¸ªæ­£æ€éšæœºæ•°
plot(x, xlab = &quot;&quot;, type = &quot;l&quot;) # ç”»çº¿å›¾
# è¯·æ€è€ƒä¸ºä»€ä¹ˆåæ ‡å€¼è¦è¿™æ ·è®¾ç½®ï¼šå¤šè¾¹å½¢çš„è¿çº¿è·¯å¾„
polygon(c(1, 1:40, 40), c(0, x, 0), col = &quot;gray&quot;)
xy &lt;- par(&quot;usr&quot;) # è·å–å½“å‰å›¾å½¢åŒºåŸŸåæ ‡èŒƒå›´ï¼Œä»¥ä¾¿ä¸‹ç”¨
# ç”¨ç™½è‰²çŸ©å½¢æŒ¡ä½äº† 0 ä»¥ä¸‹çš„éƒ¨åˆ†
rect(xy[1], xy[3], xy[2], 0, col = &quot;white&quot;)
lines(x) # é‡ç”»ä¸€é x çš„çº¿æ¡
abline(h = 0, col = &quot;lightgray&quot;) # æ·»åŠ æ°´å¹³çº¿</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<ul>
<li>ç½‘æ ¼çº¿ã€æ–‡æœ¬ã€å›¾ä¾‹</li>
</ul>
<pre class="r"><code>par(mar = c(4, 4, 4, 3))
plot(0:10, type = &quot;n&quot;, xlab = &quot;&quot;, ylab = &quot;&quot;, xlim = c(0, 12))
grid(col = &quot;gray&quot;)
title(
  main = &quot;Demonstration of text in R Graphics&quot;,
  xlab = &quot;X-axis title&quot;, ylab = &quot;Y-axis title&quot;
)
mtext(&quot;Here is \&quot;side = 4\&quot;&quot;, side = 4, line = 1)
x &lt;- c(6, 4, 6, 8)
y &lt;- c(8, 5, 2, 5)
s &lt;- c(0, 90, 180, 270)
for (i in 1:4) {
  text(x[i], y[i], sprintf(&quot;srt = %d&quot;, s[i]), srt = s[i])
}
segments(c(6, 0, 6, 12), c(10, 5, 0, 5), c(0, 6, 12, 6),
  c(5, 0, 5, 10),
  lty = c(2, 1, 1, 2)
)
legend(-0.2, 9.8, c(&quot;Upper&quot;, &quot;Lower&quot;),
  lty = 2:1, cex = 0.8,
  bty = &quot;n&quot; 
)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
</div>
<div id="section-7" class="section level2">
<h2>5.19</h2>
<ul>
<li>ç‚¹
å…³äºç‚¹çš„è®¾ç½®ï¼Œæˆ‘ä»¬æ—¢å¯ä»¥åœ¨å¾ˆå¤šä½œå›¾å‡½æ•°ä¸­ç”¨ <code>pch</code>ï¼ˆç‚¹çš„ç¬¦å·ï¼‰ï¼Œ ç­‰å‚æ•°å®ç°ï¼Œä¹Ÿå¯ä»¥åœ¨ç”¨ä½å±‚å‡½æ•° <code>points()</code> å‘å·²æœ‰å›¾å½¢ä¸­æ·»åŠ ç‚¹æ¥å®ç°</li>
</ul>
<pre class="r"><code>demo(&quot;pointTypes&quot;, package = &quot;MSG&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<pre class="r"><code># å…ˆå°†é¸¢å°¾èŠ±çš„ç±»å‹è½¬åŒ–ä¸ºæ•´æ•° 1ã€2ã€3ï¼Œä¾¿äºä½¿ç”¨å‘é‡
idx &lt;- as.integer(iris[[&quot;Species&quot;]])
plot(iris[, 3:4],
  pch = c(24, 21, 25)[idx],
  col = c(&quot;black&quot;, &quot;red&quot;, &quot;blue&quot;)[idx], panel.first = grid()
)
legend(&quot;topleft&quot;,
  legend = levels(iris[[&quot;Species&quot;]]),
  col = c(&quot;black&quot;, &quot;red&quot;, &quot;blue&quot;), pch = c(24, 21, 25), bty = &quot;n&quot;
)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<pre class="r"><code>par(mar = c(0.2, 0.2, 0.2, 0.2), mfrow = c(2, 2))
for (n in c(63, 60, 76, 74)) {
  set.seed(711)
  plot.new()
  box()
  size &lt;- c(replicate(n, 1 / rbeta(2, 1.5, 4)))
  center &lt;- t(replicate(n, runif(2)))[rep(1:n, each = 2), ]
  color &lt;- paste(&quot;#&quot;, apply(
    replicate(2 * n, sample(c(0:9, LETTERS[1:6]), 8, TRUE)), 2, paste,
    collapse = &quot;&quot;
  ), sep = &quot;&quot;)
  points(center, cex = size, pch = rep(20:21, n), col = color)
}</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-16-1.png" width="672" />
- æ›²çº¿ã€ç›´çº¿ã€çº¿æ®µã€ç®­å¤´ã€X-æ ·æ¡</p>
<p>ç”»çº¿çš„å‡½æ•°ï¼š</p>
<ol style="list-style-type: decimal">
<li>abline(a = NULL, b = NULL, h = NULL, v = NULL, reg = NULL, coef = NULL,untf = FALSE, â€¦)</li>
<li>segments(x0, y0, x1 = x0, y1 = y0, col = par(â€œfgâ€), lty = par(â€œltyâ€),lwd = par(â€œlwdâ€), â€¦)</li>
<li>arrows(x0, y0, x1 = x0, y1 = y0, length = 0.25, angle = 30, code = 2, col = par(â€œfgâ€), lty = par(â€œltyâ€), lwd = par(â€œlwdâ€), â€¦)</li>
<li>xspline(x, y = NULL, shape = 0, open = TRUE, repEnds = TRUE, draw = TRUE,border = par(â€œfgâ€), col = NA, â€¦)</li>
</ol>
<pre class="r"><code># ä¸ä½œå›¾ï¼Œåªç”»å‡ºæ¡†æ¶ï¼Œä¸”æŒ‡å®šåæ ‡è½´èŒƒå›´
plot(1:10, type = &quot;n&quot;, xlim = c(0, 10), ylim = c(0, 10))
lines(1:10, abs(rnorm(10))) # 10 ä¸ªæ­£æ€éšæœºæ•°ç»å¯¹å€¼çš„æ³¢åŠ¨çº¿
abline(a = 0, b = 1, col = &quot;gray&quot;) # ä¸åŒçš„ç›´çº¿
abline(v = 2, h = 2, lty = 2)
text(8, 3, &quot;abline(a = 0, b = 1)&quot;) # æ·»åŠ æ–‡æœ¬
arrows(8, 3.5, 6, 5.7, angle = 40) # æ·»åŠ ç®­å¤´
# å‚æ•°ç”¨äº†å‘é‡ï¼šä¸åŒç°åº¦çš„çº¿æ®µ
segments(rep(3, 4), 6:9, rep(5, 4), 6:9, col = gray(seq(0.2, 0.8, length = 4)))
text(4, 9.8, &quot;segments&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
</div>
<div id="section-8" class="section level2">
<h2>5.18</h2>
<ul>
<li>ä»Šå¤©ç ”ç©¶ä¸€ä¸‹é¢œè‰²ï¼</li>
</ul>
<ol style="list-style-type: decimal">
<li>å›ºå®šé¢œè‰²é€‰æ‹©å‡½æ•°</li>
</ol>
<pre class="r"><code># color() 657ç§é¢œè‰²
pdf(&quot;colors-bar.pdf&quot;, height = 120)
par(mar = c(0, 10, 3, 0) + 0.1, yaxs = &quot;i&quot;)
barplot(rep(1, length(colors())),
  col = rev(colors()), names.arg = rev(colors()), horiz = TRUE,
  las = 1, xaxt = &quot;n&quot;, main = expression(&quot;Bars of colors in&quot; ~ italic(colors()))
)
dev.off()

palette() # é»˜è®¤çš„è°ƒè‰²æ¿é¢œè‰²
palette(&quot;default&quot;) # æ¢å¤é»˜è®¤è°ƒè‰²æ¿
#æˆ‘ä»¬å¯ä»¥åœ¨ Rä¸­ä½¿ç”¨ä¸€ä¸ªæ•´æ•°æ¥è¡¨ç¤ºé¢œè‰²ï¼Œè€Œè¿™ä¸ªæ•´æ•°å¯¹åº”çš„é¢œè‰²å°±æ˜¯è°ƒè‰²æ¿ä¸­ç›¸åº”ä½ç½®çš„é¢œè‰²</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>é¢œè‰²ç”Ÿæˆå’Œè½¬æ¢å‡½æ•°</li>
</ol>
<pre class="r"><code>#é¢œè‰²ç”Ÿæˆæ¨¡å‹1: RGB æ¨¡å‹ï¼ˆçº¢ç»¿è“ä¸‰åŸè‰²æ··åˆ)
#2: HSV è‰²å½©æ¨¡å‹,è‰²è°ƒï¼ˆHueï¼‰ã€é¥±å’Œåº¦ï¼ˆSaturationï¼‰å’Œçº¯åº¦ï¼ˆValueï¼‰
# 3: HCL è‰²å½©æ¨¡å‹,è‰²è°ƒï¼ˆHueï¼‰ã€è‰²åº¦ï¼ˆChromaï¼‰å’Œäº®åº¦ï¼ˆLuminanceï¼‰
# 4: ç°è‰²ç”Ÿæˆæ¨¡å‹
barplot(rep(1,5),col = gray(seq(0, 1, length = 5)))</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<pre class="r"><code># ä¸¤ç§é¢œè‰²è½¬æ¢å‡½æ•°rgb2hsv()ä¸col2rgb
col2rgb(&quot;yellow&quot;) # é»„è‰²æ˜¯ç”±çº¢ç»¿æ··åˆå¾—åˆ°çš„</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>è°ƒè‰²æ¿</li>
</ol>
<pre class="r"><code>library(RColorBrewer)
layout(matrix(1:3, 3), heights = c(2, 1, 1))
par(mar = c(0, 4, 0, 0))
display.brewer.all(type = &quot;seq&quot;) # è¿ç»­å‹ï¼š18 ç§
display.brewer.all(type = &quot;div&quot;) # æç«¯åŒ–ï¼š9 ç§
display.brewer.all(type = &quot;qual&quot;) # ç¦»æ•£å‹ï¼š8 ç§</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<pre class="r"><code>xx &lt;- c(1912, 1912:1971, 1971)
yy &lt;- c(min(nhtemp), nhtemp, min(nhtemp))
plot(xx, yy, type = &quot;n&quot;, xlab = &quot;Year&quot;, ylab = &quot;Temperatures&quot;)#æ— å›¾
for (i in seq(255, 0, -3)) {
  yy &lt;- c(45, nhtemp - (nhtemp - min(nhtemp)) * (1 - i / 255), 45) # rgb() ä¸­çš„ç»¿è‰²æˆåˆ†é€æ¸å˜å°
  polygon(xx, yy, col = rgb(1, i / 255, 0), border = NA)
  Sys.sleep(0.05)
  # è¯»è€…å¯ä»¥åœ¨è¿™é‡ŒåŠ ä¸Š Sys.sleep(0.05) ä»¥ä¾¿çœ‹æ¸…ä½œå›¾è¿‡ç¨‹
}
box() # è¡¥é½è¾¹æ¡†</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-21-1.png" width="672" />
4. é¢œè‰²æ··åˆ</p>
<pre class="r"><code>#out = alpha * new + (1 - alpha) * old
x &lt;- rgb(1, seq(0, 1, length = 30), 0)
barplot(rep(1, 30), col = x)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<pre class="r"><code># ä¸‰åŸè‰²
x = rep(1,6)
names(x) = c(&quot;red&quot;,&quot;green&quot;,&quot;blue&quot;,&quot;magenta&quot;,&quot;yellow&quot;,&quot;cyan&quot;)
red = rgb(1,0,0,1)
green = rgb(0,1,0,1)
blue = rgb(0,0,1,1)
magenta = rgb(1,0,1,1)
yellow = rgb(1,1,0)
cyan = rgb(0,1,1)
barplot(x,col=c(red,green,blue,magenta,yellow,cyan) )</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-22-2.png" width="672" /></p>
</div>
<div id="section-9" class="section level2">
<h2>5.17</h2>
<pre class="r"><code>troops &lt;- read.table(system.file(&quot;extdata&quot;, &quot;troops.txt&quot;, package = &quot;MSG&quot;), header = TRUE)
cities &lt;- read.table(system.file(&quot;extdata&quot;, &quot;cities.txt&quot;, package = &quot;MSG&quot;), header = TRUE)
library(ggplot2)
p &lt;- ggplot(cities, aes(x = long, y = lat)) # æ¡†æ¶
p &lt;- p + geom_path(aes(size = survivors, colour = direction, group = group), 
                   data = troops, lineend = &quot;round&quot;) # å†›é˜Ÿè·¯çº¿
p &lt;- p + geom_point() # åŸå¸‚ç‚¹
p &lt;- p + geom_text(aes(label = city), hjust = 0, vjust = 1, size = 2.5) # åŸå¸‚åç§°
p &lt;- p + scale_colour_manual(values = c(&quot;grey50&quot;, &quot;red&quot;)) + 
  scale_size(range = c(1, 10)) +
  theme(legend.position = &quot;none&quot;) + 
  xlim(24, 39) # ç»†èŠ‚è°ƒæ•´å·¥ä½œ
print(p) # æ‰“å°å…¨å›¾</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<ul>
<li>R çš„ç¼–ç¨‹æ–¹å¼æ˜¯é¢å‘å¯¹è±¡ï¼ˆObject-Orientedï¼‰çš„</li>
<li>å‘é‡ï¼š</li>
</ul>
<pre class="r"><code>1:10
c(7.11, 9.11, 9.19, 1.23)
x &lt;- c(7.11, 9.11, 9.19, 1.23)
x[c(1, 4)]
sort(x)
seq(7,9,0.2)
seq(7, 9, length.out = 6)#ç”Ÿæˆå‘é‡é•¿åº¦ä¸º 6
rep(1:3, 5)
rep(1:3, each = 5)</code></pre>
<ul>
<li>å› å­</li>
</ul>
<pre class="r"><code>x &lt;- factor(c(1, 2, 3, 1, 1, 3, 2, 3, 3), levels = 1:3, labels = c(&quot;g1&quot;, &quot;g2&quot;, &quot;g3&quot;))
#æˆ‘ä»¬å¯ä»¥å¯¹å› å­å‹æ•°æ®æ±‚é¢‘æ•°ã€å°†å…¶è½¬åŒ–ä¸ºæ•´æ•°æˆ–å­—ç¬¦å‹å‘é‡ã€‚
table(x)
as.integer(x)
as.character(x)
#å› å­å‹æ•°æ®åœ¨åˆ†ç±»æ±‡æ€»æ—¶æ¯”è¾ƒæœ‰ç”¨ï¼Œä¾‹å¦‚åœ¨ tapply() ä¸­ï¼š
y &lt;- 1:9
data.frame(y, x) # x å’Œ y å¹¶åˆ—æ”¾çš„æ ·å­
tapply(y, x, mean) # x çš„æ¯ä¸€ç»„çš„å‡å€¼
#å®šåºå˜é‡:ä¸æ­¤ç›¸å…³çš„å‡½æ•°ä¸º ordered()</code></pre>
<ul>
<li>æ•°ç»„å’ŒçŸ©é˜µ</li>
</ul>
<p>æ•°ç»„å’ŒçŸ©é˜µå¯ä»¥åˆ†åˆ«ç”±<code>array()</code>å’Œ<code>matrix()</code> å‡½æ•°ç”Ÿæˆ</p>
<pre class="r"><code>x &lt;- array(1:24, c(3, 4, 2)) # 3 ç»´æ•°ç»„ç¤ºä¾‹
dim(x)
x &lt;- matrix(1:12, nrow = 2, ncol = 6) # çŸ©é˜µç¤ºä¾‹
# ä¸€ä¸ªéšæœºæ–¹é˜µ
(x &lt;- matrix(c(2, 9, 4, 5, 6, 8, 1, 3, 7), 3))
solve(x)</code></pre>
<ul>
<li>æ•°æ®æ¡†å’Œåˆ—è¡¨</li>
</ul>
<p>æ•°æ®æ¡†ï¼ˆdata frameï¼‰å’Œåˆ—è¡¨ï¼ˆlistï¼‰æ˜¯ R ä¸­éå¸¸çµæ´»çš„æ•°æ®ç»“æ„</p>
<pre class="r"><code># ç”Ÿæˆä¸€ä¸ªæ•°æ®æ¡†ï¼Œå‰ä¸¤åˆ—ä¸ºæ•°å€¼å‹ï¼Œåä¸€åˆ—ä¸ºå­—ç¬¦å‹
data.frame(x = rnorm(5), y = runif(5), z = letters[1:5])
# åŒ…å«å››ä¸ªå­å¯¹è±¡çš„åˆ—è¡¨
Lst &lt;- list(name = &quot;Fred&quot;, wife = &quot;Mary&quot;, no.children = 3, child.ages = c(4, 7, 9))</code></pre>
<ul>
<li><p>çŸ©é˜µçš„æœ¬è´¨æ˜¯ï¼ˆå¸¦æœ‰ç»´åº¦å±æ€§çš„ï¼‰å‘é‡ï¼Œæ•°æ®æ¡†çš„æœ¬è´¨æ˜¯ï¼ˆæ•´é½çš„ï¼‰åˆ—è¡¨ã€‚</p></li>
<li><p>å‡½æ•°</p></li>
</ul>
<pre class="r"><code>kurtosis &lt;- function(x, na.rm = FALSE) {
  # å»æ‰ç¼ºå¤±å€¼
  if (na.rm) x &lt;- x[!is.na(x)]
  return(sum((x - mean(x))^4) / (length(x) * var(x)^2) - 3)
}#è¯¥å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œæ•°æ®å‘é‡xå’Œæ˜¯å¦åˆ é™¤ç¼ºå¤±å€¼ na.rmï¼Œåè€…æœ‰é»˜è®¤å€¼ FALSEï¼›
kurtosis(runif(100))
#æ³›å‹å‡½æ•° ï¼ˆgeneric functionï¼‰ä¼ ç»™ plot() çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä½•ç§ç±»ï¼Œåˆ™è°ƒç”¨ä½•ç§å‡½æ•°è¿›è¡Œä½œå›¾
head(methods(&quot;plot&quot;), 24) # æ˜¾ç¤ºå‰24ä¸ª
class(iris)
plot(iris) # è°ƒç”¨ plot.data.frame() ä½œæ•£ç‚¹å›¾çŸ©é˜µ</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<pre class="r"><code>x &lt;- density(faithful$waiting)
class(x)
par(mar = c(4, 4, 3, 0.5))
plot(x) # è°ƒç”¨ plot.density() ä½œå¯†åº¦æ›²çº¿</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-28-2.png" width="672" /></p>
</div>
<div id="section-10" class="section level2">
<h2>5.16</h2>
<p>ğŸ’ğŸ’ğŸ’å¬å¤§ä½¬è®²åº§ï¼ <a href="https://connect.xjtlu.edu.cn/interaction/forum/topic.php?id=1132">å¤§ä½¬è®²åº§ppté“¾æ¥</a></p>
<pre><code>library(animation)
plot.new()
for (i in 1:30){
    points(runif(1), runif(1), pch = 19, cex = 2)
    Sys.sleep(0.2)
}</code></pre>
<pre class="r"><code>for (i in 1:20){
    hist(rnorm(20))
}</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-29-.gif" width="672" /></p>
</div>
<div id="section-11" class="section level2">
<h2>5.14</h2>
<p>åƒçš„å¤ªé¥±å®¹æ˜“çŠ¯å›°ğŸ˜µ</p>
<ul>
<li>æ¡å½¢å›¾</li>
</ul>
<pre class="r"><code># Load vcd package
library(vcd)
## Warning: ç¨‹è¾‘åŒ…&#39;vcd&#39;æ˜¯ç”¨Rç‰ˆæœ¬4.0.5 æ¥å»ºé€ çš„
## è½½å…¥éœ€è¦çš„ç¨‹è¾‘åŒ…ï¼šgrid
# Get cell counts for improved variable
counts &lt;- table(Arthritis$Improved)
counts
# simple bar plot
barplot(counts, main = &quot;Simple Bar Plot&quot;, xlab = &quot;Improvement&quot;, ylab = &quot;Frequency&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<pre class="r"><code>
# horizontal bar plot
barplot(counts, main = &quot;Horizontal Bar Plot&quot;, xlab = &quot;Frequency&quot;, ylab = &quot;Improvement&quot;, horiz = TRUE)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-30-2.png" width="672" /></p>
<pre class="r"><code># get counts for Improved by Treatment table
counts &lt;- table(Arthritis$Improved,Arthritis$Treatment)
counts
# stacked barplot
barplot(counts, main = &quot;Stacked Bar Plot&quot;, xlab = &quot;Treatment&quot;, ylab = &quot;Frequency&quot;, col = c(&quot;red&quot;, &quot;yellow&quot;, &quot;green&quot;), legend = rownames(counts))</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-30-3.png" width="672" /></p>
<pre class="r"><code>
# grouped barplot
barplot(counts, main = &quot;Grouped Bar Plot&quot;, xlab = &quot;Treatment&quot;, ylab = &quot;Frequency&quot;, col = c(&quot;red&quot;, &quot;yellow&quot;, &quot;green&quot;), legend = rownames(counts), beside = TRUE)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-30-4.png" width="672" /></p>
<pre class="r"><code># Mean bar plots
states &lt;- data.frame(state.region, state.x77)
means &lt;- aggregate(states$Illiteracy, 
    by = list(state.region), 
    FUN = mean)
means
means &lt;- means[order(means$x), ]
means
barplot(means$x, names.arg = means$Group.1)
title(&quot;Mean Illiteracy Rate&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-30-5.png" width="672" /></p>
<pre class="r"><code>#ä¸ºæ£˜çŠ¶å›¾ï¼ˆspinogramï¼‰
attach(Arthritis) 
counts &lt;- table(Treatment, Improved) 
spine(counts, main=&quot;Spinogram Example&quot;) </code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-30-6.png" width="672" /></p>
<pre class="r"><code>detach(Arthritis) </code></pre>
</div>
<div id="section-12" class="section level2">
<h2>5.13</h2>
<p>ç¡å¾—å¥½æ˜¯çœŸçš„å¾ˆé‡è¦å‘€</p>
<pre class="r"><code>options(digits=2)#)é™å®šäº†è¾“å‡ºå°æ•°ç‚¹åæ•°å­—ä½æ•°
Student &lt;- c(&quot;John Davis&quot;, &quot;Angela Williams&quot;, 
    &quot;Bullwinkle Moose&quot;, &quot;David Jones&quot;, 
    &quot;Janice Markhammer&quot;, &quot;Cheryl Cushing&quot;,
    &quot;Reuven Ytzrhak&quot;, &quot;Greg Knox&quot;, &quot;Joel England&quot;,
    &quot;Mary Rayburn&quot;)
Math &lt;- c(502, 600, 412, 358, 495, 512, 410, 625, 573, 522)
Science &lt;- c(95, 99, 80, 82, 75, 85, 80, 95, 89, 86)
English &lt;- c(25, 22, 18, 15, 20, 28, 15, 30, 27, 18)
roster &lt;- data.frame(Student, Math, Science, English,stringsAsFactors=FALSE)
    
z &lt;- scale(roster[,2:4]) #å°†å˜é‡è¿›è¡Œæ ‡å‡†åŒ–

score &lt;- apply(z, 1, mean)                     
roster &lt;- cbind(roster, score)
#é€šè¿‡å‡½æ•°mean()æ¥è®¡ç®—å„è¡Œçš„å‡å€¼ä»¥è·å¾—ç»¼åˆå¾—åˆ†ï¼Œå¹¶ä½¿ç”¨å‡½æ•°cbind()å°†å…¶æ·»åŠ åˆ°èŠ±åå†Œä¸­ 
y &lt;- quantile(score, c(.8,.6,.4,.2)) #å‡½æ•°quantile()ç»™å‡ºäº†å­¦ç”Ÿç»¼åˆå¾—åˆ†çš„ç™¾åˆ†ä½æ•°                                  
roster$grade[score &gt;= y[1]] &lt;- &quot;A&quot;           
roster$grade[score &lt; y[1] &amp; score &gt;= y[2]] &lt;- &quot;B&quot;
roster$grade[score &lt; y[2] &amp; score &gt;= y[3]] &lt;- &quot;C&quot;
roster$grade[score &lt; y[3] &amp; score &gt;= y[4]] &lt;- &quot;D&quot;
roster$grade[score &lt; y[4]] &lt;- &quot;F&quot;

name &lt;- strsplit((roster$Student), &quot; &quot;) #ä½¿ç”¨å‡½æ•°strsplit()ä»¥ç©ºæ ¼ä¸ºç•ŒæŠŠå­¦ç”Ÿå§“åæ‹†åˆ†ä¸ºå§“æ°å’Œåå­—           
#ä½ å¯ä»¥ä½¿ç”¨å‡½æ•°sapply()æå–åˆ—è¡¨ä¸­æ¯ä¸ªæˆåˆ†çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ”¾å…¥ä¸€ä¸ªå‚¨å­˜åå­—çš„å‘é‡Firstnameï¼Œå¹¶æå–æ¯ä¸ªæˆåˆ†çš„ç¬¬äºŒä¸ªå…ƒç´ ï¼Œæ”¾å…¥ä¸€ä¸ªå‚¨å­˜å§“æ°çš„å‘é‡Lastnameã€‚&quot;[&quot;æ˜¯ä¸€ä¸ªå¯ä»¥æå–æŸä¸ªå¯¹è±¡çš„ä¸€éƒ¨åˆ†çš„å‡½æ•°â€”â€”åœ¨è¿™é‡Œå®ƒæ˜¯ç”¨æ¥æå–åˆ—è¡¨nameå„æˆåˆ†ä¸­çš„ç¬¬ä¸€ä¸ªæˆ–ç¬¬äºŒä¸ªå…ƒç´ çš„ã€‚
lastname &lt;- sapply(name, &quot;[&quot;, 2)
firstname &lt;- sapply(name, &quot;[&quot;, 1)

roster &lt;- cbind(firstname,lastname, roster[,-1])
roster &lt;- roster[order(lastname,firstname),]

roster</code></pre>
<pre class="r"><code># for
for (i in 1:10) 
    print(i)
# while
i &lt;- 10 
while (i &gt; 0) {
    print(i)
    i &lt;- i - 1} </code></pre>
<ul>
<li><p>if</p>
<ul>
<li><code>if (cond) statement1 else statement2</code></li>
<li><code>ifelse(cond, statement1, statement2)</code></li>
</ul></li>
<li><p>switch <code>switch(expr, ...)</code></p></li>
</ul>
<pre class="r"><code>mydate &lt;- function(type=&quot;long&quot;) {
    switch(type,
    long =  format(Sys.time(), &quot;%A %B %d %Y&quot;), 
    short = format(Sys.time(), &quot;%m-%d-%y&quot;),
    cat(type, &quot;is not a recognized type\n&quot;))
}
mydate(&quot;long&quot;)
mydate(&quot;short&quot;)
mydate()
mydate(&quot;medium&quot;)</code></pre>
<ul>
<li>å‡½æ•°</li>
</ul>
<!-- -->
<pre><code>myfunction &lt;- function(arg1, arg2, ... ){ 
 statements 
 return(object) 
} </code></pre>
<p><img src="5.jpg" /></p>
<ul>
<li>åŒ…reshape2 <code>æ•°melt()å’Œdcast()</code></li>
</ul>
</div>
<div id="section-13" class="section level2">
<h2>5.12</h2>
<p>æ˜¨æ™šæ˜¯è¢«èšŠå­æ¯æ‰çš„ç¡çœ ï¼</p>
<pre class="r"><code>x &lt;- c(1, 2, 3, 4, 5, 6, 7, 8)
mean(x)
sd(x)</code></pre>
<p><img src="2.jpg" /></p>
<pre class="r"><code># normal distribution
library(MASS)
## Warning: ç¨‹è¾‘åŒ…&#39;MASS&#39;æ˜¯ç”¨Rç‰ˆæœ¬4.0.5 æ¥å»ºé€ çš„
options(digits=3)
set.seed(1234)
mean &lt;- c(230.7, 146.7, 3.6)           
sigma &lt;- matrix( c(15360.8, 6721.2, -47.1,                           6721.2, 4700.9, -16.5,
            -47.1,  -16.5,   0.3), nrow=3, ncol=3)
mydata &lt;- mvrnorm(500, mean, sigma)             
mydata &lt;- as.data.frame(mydata)                   
names(mydata) &lt;- c(&quot;y&quot;, &quot;x1&quot;, &quot;x2&quot;)               
dim(mydata)
head(mydata, n=10)   </code></pre>
<ul>
<li>å­—ç¬¦ä¸²å¤„ç†å‡½æ•°</li>
<li>å…¶ä»–æœ‰ç”¨å‡½æ•° <img src="4.jpg" /></li>
<li>Rä¸­æä¾›äº†ä¸€ä¸ª<code>apply()</code>å‡½æ•°ï¼Œå¯å°†ä¸€ä¸ªä»»æ„å‡½æ•°â€œåº”ç”¨â€åˆ°çŸ©é˜µã€æ•°ç»„ã€æ•°æ®æ¡†çš„ä»»ä½•ç»´ åº¦ä¸Šã€‚<code>apply()</code>å‡½æ•°çš„ä½¿ç”¨æ ¼å¼ä¸ºï¼š <code>apply(x, MARGIN, FUN, ...)</code></li>
</ul>
</div>
<div id="section-14" class="section level2">
<h2>5.11</h2>
<p>ç­”è¾©è®©æˆ‘å¥½ç–²æƒ«ã€‚ã€‚</p>
<ul>
<li>æ—¥æœŸ</li>
</ul>
<pre class="r"><code>mydates &lt;- as.Date(c(&quot;2007-06-22&quot;,&quot;2004-02-13&quot;)) 
today &lt;- Sys.Date() 
format(today, format=&quot;%B %d %Y&quot;) 
dob &lt;- as.Date(&quot;2000-01-02&quot;)
difftime(today, dob, units=&quot;weeks&quot;) 
#strDates &lt;- as.character(dates)å°†æ—¥æœŸè½¬ä¸ºå­—ç¬¦</code></pre>
<p><img src="1.jpg" /></p>
<pre class="r"><code>a &lt;- c(1, 2, 3)
a
is.numeric(a)
is.vector(a)
a &lt;- as.character(a)
a
is.numeric(a)
is.vector(a)
is.character(a)</code></pre>
<ul>
<li>ä½¿ç”¨<code>order()</code>å‡½æ•°å¯¹ä¸€ä¸ªæ•°æ®æ¡†è¿›è¡Œæ’åºã€‚é»˜è®¤çš„æ’åºé¡ºåºæ˜¯å‡åºã€‚åœ¨æ’åºå˜é‡çš„å‰è¾¹åŠ ä¸€ä¸ªå‡å·å³å¯å¾—åˆ°é™åºçš„æ’åºç»“æœ</li>
<li>æ¨ªå‘åˆå¹¶ä¸¤ä¸ªæ•°æ®æ¡†ï¼ˆæ•°æ®é›†ï¼‰ï¼Œä½¿ç”¨<code>merge()</code>å‡½æ•°ï¼Œ<code>rbind(),cbind()</code></li>
<li><code>subset()</code>å‡½æ•°å¤§æ¦‚æ˜¯é€‰æ‹©å˜é‡å’Œè§‚æµ‹æœ€ç®€å•çš„æ–¹æ³•</li>
<li><code>sample()</code>å‡½æ•°èƒ½å¤Ÿè®©ä½ ä»æ•°æ®é›†ä¸­ï¼ˆæœ‰æ”¾å›æˆ–æ— æ”¾å›åœ°ï¼‰æŠ½å–å¤§å°ä¸ºnçš„ä¸€ä¸ªéšæœºæ ·æœ¬</li>
</ul>
<pre class="r"><code>library(sqldf)
## Warning: ç¨‹è¾‘åŒ…&#39;sqldf&#39;æ˜¯ç”¨Rç‰ˆæœ¬4.0.5 æ¥å»ºé€ çš„
## è½½å…¥éœ€è¦çš„ç¨‹è¾‘åŒ…ï¼šgsubfn
## Warning: ç¨‹è¾‘åŒ…&#39;gsubfn&#39;æ˜¯ç”¨Rç‰ˆæœ¬4.0.5 æ¥å»ºé€ çš„
## è½½å…¥éœ€è¦çš„ç¨‹è¾‘åŒ…ï¼šproto
## Warning: ç¨‹è¾‘åŒ…&#39;proto&#39;æ˜¯ç”¨Rç‰ˆæœ¬4.0.5 æ¥å»ºé€ çš„
## è½½å…¥éœ€è¦çš„ç¨‹è¾‘åŒ…ï¼šRSQLite
newdf &lt;- sqldf(&quot;select * from mtcars where carb=1 order by mpg&quot;, 
    row.names = TRUE)
newdf &lt;- sqldf(&quot;select avg(mpg) as avg_mpg, avg(disp) as avg_disp,
    gear from mtcars where cyl in (4, 6) group by gear&quot;)</code></pre>
</div>
<div id="section-15" class="section level2">
<h2>5.10</h2>
<pre class="r"><code>mydata &lt;- data.frame(x1 = c(2, 2, 6, 4), x2 = c(3, 4, 2, 8))
mydata$sumx &lt;- mydata$x1 + mydata$x2
mydata$meanx &lt;- (mydata$x1 + mydata$x2)/2
attach(mydata)
mydata$sumx &lt;- x1 + x2
mydata$meanx &lt;- (x1 + x2)/2
detach(mydata)
mydata &lt;- transform(mydata, sumx = x1 + x2, meanx = (x1 + x2)/2)</code></pre>
<ul>
<li>plyråŒ…ä¸­æœ‰ä¸€ä¸ª<code>rename()</code>å‡½æ•°ï¼Œå¯ç”¨äºä¿®æ”¹å˜é‡å</li>
</ul>
<pre class="r"><code>y &lt;- c(1, 2, 3, NA) 
print(is.na(y))
x &lt;- c(1, 2, NA, 3) 
print(sum(x, na.rm=TRUE))</code></pre>
<ul>
<li><code>na.omit()</code>å¯ä»¥åˆ é™¤æ‰€æœ‰å«æœ‰ç¼ºå¤±æ•°æ®çš„è¡Œ</li>
</ul>
</div>
<div id="section-16" class="section level2">
<h2>5.9</h2>
<pre class="r"><code>attach(mtcars)
## The following object is masked from package:ggplot2:
## 
##     mpg
plot(wt, mpg)
abline(lm(mpg ~ wt))
title(&quot;Regression of MPG on Weight&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-41-1.png" width="672" /></p>
<pre class="r"><code>detach(mtcars)</code></pre>
<ul>
<li>å¯ç”¨<code>par(optionname=value,optionname=name,...)</code>ä¿®æ”¹å›¾å½¢å‚æ•°ï¼Œä¹Ÿå¯ç”¨é«˜çº§ç»˜å›¾å‡½æ•°ç›´æ¥æä¾›çš„optionname=valueçš„é”®å€¼å¯¹</li>
<li>å‡½æ•°<code>colors()</code>å¯ä»¥è¿”å›æ‰€æœ‰å¯ç”¨é¢œè‰²çš„åç§°</li>
<li>å‡½æ•°<code>plotmath()</code>å¯ä»¥ä¸ºå›¾å½¢ä¸»ä½“æˆ–è¾¹ç•Œä¸Šçš„æ ‡é¢˜ã€åæ ‡è½´åç§°æˆ–æ–‡æœ¬æ ‡æ³¨æ·»åŠ æ•°å­¦ç¬¦å·</li>
<li><code>layout()</code>ğŸ‘</li>
</ul>
</div>
<div id="section-17" class="section level2">
<h2>5.8</h2>
<pre class="r"><code>#çŸ©é˜µ
y = matrix(1:20,nrow = 5, ncol = 4)
y
cells &lt;- c(1, 26, 24, 68)
rnames &lt;- c(&quot;R1&quot;, &quot;R2&quot;)
cnames &lt;- c(&quot;C1&quot;, &quot;C2&quot;)
mymatrix &lt;- matrix(cells, nrow = 2, ncol = 2, byrow = TRUE, 
    dimnames = list(rnames, cnames))
mymatrix
mymatrix &lt;- matrix(cells, nrow = 2, ncol = 2, byrow = FALSE, 
    dimnames = list(rnames, cnames))
mymatrix
#æ•°ç»„ï¼šä¸ªåˆ›å»ºä¸‰ç»´ï¼ˆ2Ã—3Ã—4ï¼‰æ•°å€¼å‹æ•°ç»„
dim1 &lt;- c(&quot;A1&quot;, &quot;A2&quot;)
dim2 &lt;- c(&quot;B1&quot;, &quot;B2&quot;, &quot;B3&quot;)
dim3 &lt;- c(&quot;C1&quot;, &quot;C2&quot;, &quot;C3&quot;, &quot;C4&quot;)
z &lt;- array(1:24, c(2, 3, 4), dimnames = list(dim1, dim2, dim3))
z</code></pre>
<pre class="r"><code>#åˆ›å»ºæ•°æ®æ¡†
patientID &lt;- c(1, 2, 3, 4)
age &lt;- c(25, 34, 28, 52)
diabetes &lt;- c(&quot;Type1&quot;, &quot;Type2&quot;, &quot;Type1&quot;, &quot;Type1&quot;)
status &lt;- c(&quot;Poor&quot;, &quot;Improved&quot;, &quot;Excellent&quot;, &quot;Poor&quot;)
patientdata &lt;- data.frame(patientID, age, diabetes, 
    status)
patientdata
patientdata$age
table(patientdata$diabetes, patientdata$status)#ç”Ÿæˆç³–å°¿ç—…ç±»å‹å˜é‡diabeteså’Œç—…æƒ…å˜é‡statusçš„åˆ—è”è¡¨</code></pre>
<ul>
<li>å‡½æ•°attach()å¯å°†æ•°æ®æ¡†æ·»åŠ åˆ°Rçš„æœç´¢è·¯å¾„ä¸­ã€‚Råœ¨é‡åˆ°ä¸€ä¸ªå˜é‡åä»¥åï¼Œå°†æ£€æŸ¥æœç´¢è·¯å¾„ä¸­çš„æ•°æ®æ¡†ï¼Œä½†æ˜¯<a href="https://google.github.io/styleguide/Rguide.html">Rä»£ç é£æ ¼è¯´æ˜</a>é‡Œè¯´æœ€å¥½ä¸è¦ç”¨å™¢å“ˆå“ˆå“ˆ</li>
<li><strong>with</strong></li>
<li>ç±»åˆ«ï¼ˆåä¹‰å‹ï¼‰å˜é‡å’Œæœ‰åºç±»åˆ«ï¼ˆæœ‰åºå‹ï¼‰å˜é‡åœ¨Rä¸­ç§°ä¸ºå› å­ï¼ˆfactorï¼‰</li>
</ul>
<pre class="r"><code>patientID &lt;- c(1, 2, 3, 4)
age &lt;- c(25, 34, 28, 52)
diabetes &lt;- c(&quot;Type1&quot;, &quot;Type2&quot;, &quot;Type1&quot;, &quot;Type1&quot;)
status &lt;- c(&quot;Poor&quot;, &quot;Improved&quot;, &quot;Excellent&quot;, &quot;Poor&quot;)
diabetes &lt;- factor(diabetes)
status &lt;- factor(status, order = TRUE)
patientdata &lt;- data.frame(patientID, age, diabetes, status)
str(patientdata)</code></pre>
<ul>
<li>edit() å¯ä»¥ä¿®æ”¹æ•°æ®</li>
</ul>
</div>
<div id="section-18" class="section level2">
<h2>5.7</h2>
<pre class="r"><code>help.start()
## starting httpd help server ... done
help(package = &quot;vcd&quot;)
library(vcd) 
help(Arthritis) #é˜…è¯»æ•°æ®é›†Arthritisçš„æè¿°
Arthritis 
example(Arthritis)# è¿è¡Œæ•°æ®é›†Arthritisè‡ªå¸¦çš„ç¤ºä¾‹</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-45-1.png" width="672" /><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-45-2.png" width="672" /></p>
<pre class="r"><code>#q()</code></pre>
</div>
