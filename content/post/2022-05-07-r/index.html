---
title: R每日随心记
author: zyy
date: '2022-05-07'
slug: r
categories: []
tags: []
---



<p>这三种语言说熟悉也熟悉，但总觉得缺乏一种系统感，那就每天花点时间浏览一些书籍记录一下吧！</p>
<p>书籍列表(更新中)：</p>
<ul>
<li>R语言实战(第2版)</li>
</ul>
<pre class="r"><code>knitr::opts_chunk$set(echo = T,collapse = T,
                      results = &quot;hide&quot;)</code></pre>
<div id="section" class="section level2">
<h2>5.12</h2>
<p>昨晚是被蚊子毁掉的睡眠！</p>
<pre class="r"><code>x &lt;- c(1, 2, 3, 4, 5, 6, 7, 8)
mean(x)
sd(x)</code></pre>
<p><img src="2.jpg" /></p>
<pre class="r"><code># normal distribution
library(MASS)
## Warning: 程辑包&#39;MASS&#39;是用R版本4.0.5 来建造的
options(digits=3)
set.seed(1234)
mean &lt;- c(230.7, 146.7, 3.6)           
sigma &lt;- matrix( c(15360.8, 6721.2, -47.1,                           6721.2, 4700.9, -16.5,
            -47.1,  -16.5,   0.3), nrow=3, ncol=3)
mydata &lt;- mvrnorm(500, mean, sigma)             
mydata &lt;- as.data.frame(mydata)                   
names(mydata) &lt;- c(&quot;y&quot;, &quot;x1&quot;, &quot;x2&quot;)               
dim(mydata)
head(mydata, n=10)   </code></pre>
<ul>
<li>字符串处理函数</li>
<li>其他有用函数
<img src="4.jpg" /></li>
<li>R中提供了一个<code>apply()</code>函数，可将一个任意函数“应用”到矩阵、数组、数据框的任何维
度上。<code>apply()</code>函数的使用格式为：
<code>apply(x, MARGIN, FUN, ...)</code></li>
</ul>
</div>
<div id="section-1" class="section level2">
<h2>5.11</h2>
<p>答辩让我好疲惫。。</p>
<ul>
<li>日期</li>
</ul>
<pre class="r"><code>mydates &lt;- as.Date(c(&quot;2007-06-22&quot;,&quot;2004-02-13&quot;)) 
today &lt;- Sys.Date() 
format(today, format=&quot;%B %d %Y&quot;) 
dob &lt;- as.Date(&quot;2000-01-02&quot;)
difftime(today, dob, units=&quot;weeks&quot;) 
#strDates &lt;- as.character(dates)将日期转为字符</code></pre>
<p><img src="1.jpg" /></p>
<pre class="r"><code>a &lt;- c(1, 2, 3)
a
is.numeric(a)
is.vector(a)
a &lt;- as.character(a)
a
is.numeric(a)
is.vector(a)
is.character(a)</code></pre>
<ul>
<li>使用<code>order()</code>函数对一个数据框进行排序。默认的排序顺序是升序。在排序变量的前边加一个减号即可得到降序的排序结果</li>
<li>横向合并两个数据框（数据集），使用<code>merge()</code>函数，<code>rbind(),cbind()</code></li>
<li><code>subset()</code>函数大概是选择变量和观测最简单的方法</li>
<li><code>sample()</code>函数能够让你从数据集中（有放回或无放回地）抽取大小为n的一个随机样本</li>
</ul>
<pre class="r"><code>library(sqldf)
## Warning: 程辑包&#39;sqldf&#39;是用R版本4.0.5 来建造的
## 载入需要的程辑包：gsubfn
## Warning: 程辑包&#39;gsubfn&#39;是用R版本4.0.5 来建造的
## 载入需要的程辑包：proto
## Warning: 程辑包&#39;proto&#39;是用R版本4.0.5 来建造的
## 载入需要的程辑包：RSQLite
newdf &lt;- sqldf(&quot;select * from mtcars where carb=1 order by mpg&quot;, 
    row.names = TRUE)
newdf &lt;- sqldf(&quot;select avg(mpg) as avg_mpg, avg(disp) as avg_disp,
    gear from mtcars where cyl in (4, 6) group by gear&quot;)</code></pre>
</div>
<div id="section-2" class="section level2">
<h2>5.10</h2>
<pre class="r"><code>mydata &lt;- data.frame(x1 = c(2, 2, 6, 4), x2 = c(3, 4, 2, 8))
mydata$sumx &lt;- mydata$x1 + mydata$x2
mydata$meanx &lt;- (mydata$x1 + mydata$x2)/2
attach(mydata)
mydata$sumx &lt;- x1 + x2
mydata$meanx &lt;- (x1 + x2)/2
detach(mydata)
mydata &lt;- transform(mydata, sumx = x1 + x2, meanx = (x1 + x2)/2)</code></pre>
<ul>
<li>plyr包中有一个<code>rename()</code>函数，可用于修改变量名</li>
</ul>
<pre class="r"><code>y &lt;- c(1, 2, 3, NA) 
print(is.na(y))
x &lt;- c(1, 2, NA, 3) 
print(sum(x, na.rm=TRUE))</code></pre>
<ul>
<li><code>na.omit()</code>可以删除所有含有缺失数据的行</li>
</ul>
</div>
<div id="section-3" class="section level2">
<h2>5.9</h2>
<pre class="r"><code>attach(mtcars)
plot(wt, mpg)
abline(lm(mpg ~ wt))
title(&quot;Regression of MPG on Weight&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<pre class="r"><code>detach(mtcars)</code></pre>
<ul>
<li>可用<code>par(optionname=value,optionname=name,...)</code>修改图形参数，也可用高级绘图函数直接提供的optionname=value的键值对</li>
<li>函数<code>colors()</code>可以返回所有可用颜色的名称</li>
<li>函数<code>plotmath()</code>可以为图形主体或边界上的标题、坐标轴名称或文本标注添加数学符号</li>
<li><code>layout()</code>👍</li>
</ul>
</div>
<div id="section-4" class="section level2">
<h2>5.8</h2>
<pre class="r"><code>#矩阵
y = matrix(1:20,nrow = 5, ncol = 4)
y
cells &lt;- c(1, 26, 24, 68)
rnames &lt;- c(&quot;R1&quot;, &quot;R2&quot;)
cnames &lt;- c(&quot;C1&quot;, &quot;C2&quot;)
mymatrix &lt;- matrix(cells, nrow = 2, ncol = 2, byrow = TRUE, 
    dimnames = list(rnames, cnames))
mymatrix
mymatrix &lt;- matrix(cells, nrow = 2, ncol = 2, byrow = FALSE, 
    dimnames = list(rnames, cnames))
mymatrix
#数组：个创建三维（2×3×4）数值型数组
dim1 &lt;- c(&quot;A1&quot;, &quot;A2&quot;)
dim2 &lt;- c(&quot;B1&quot;, &quot;B2&quot;, &quot;B3&quot;)
dim3 &lt;- c(&quot;C1&quot;, &quot;C2&quot;, &quot;C3&quot;, &quot;C4&quot;)
z &lt;- array(1:24, c(2, 3, 4), dimnames = list(dim1, dim2, dim3))
z</code></pre>
<pre class="r"><code>#创建数据框
patientID &lt;- c(1, 2, 3, 4)
age &lt;- c(25, 34, 28, 52)
diabetes &lt;- c(&quot;Type1&quot;, &quot;Type2&quot;, &quot;Type1&quot;, &quot;Type1&quot;)
status &lt;- c(&quot;Poor&quot;, &quot;Improved&quot;, &quot;Excellent&quot;, &quot;Poor&quot;)
patientdata &lt;- data.frame(patientID, age, diabetes, 
    status)
patientdata
patientdata$age
table(patientdata$diabetes, patientdata$status)#生成糖尿病类型变量diabetes和病情变量status的列联表</code></pre>
<ul>
<li>函数attach()可将数据框添加到R的搜索路径中。R在遇到一个变量名以后，将检查搜索路径中的数据框，但是<a href="https://google.github.io/styleguide/Rguide.html">R代码风格说明</a>里说最好不要用噢哈哈哈</li>
<li><strong>with</strong></li>
<li>类别（名义型）变量和有序类别（有序型）变量在R中称为因子（factor）</li>
</ul>
<pre class="r"><code>patientID &lt;- c(1, 2, 3, 4)
age &lt;- c(25, 34, 28, 52)
diabetes &lt;- c(&quot;Type1&quot;, &quot;Type2&quot;, &quot;Type1&quot;, &quot;Type1&quot;)
status &lt;- c(&quot;Poor&quot;, &quot;Improved&quot;, &quot;Excellent&quot;, &quot;Poor&quot;)
diabetes &lt;- factor(diabetes)
status &lt;- factor(status, order = TRUE)
patientdata &lt;- data.frame(patientID, age, diabetes, status)
str(patientdata)</code></pre>
<ul>
<li>edit() 可以修改数据</li>
</ul>
</div>
<div id="section-5" class="section level2">
<h2>5.7</h2>
<pre class="r"><code>help.start()
## starting httpd help server ... done
help(package = &quot;vcd&quot;)
library(vcd) 
## Warning: 程辑包&#39;vcd&#39;是用R版本4.0.5 来建造的
## 载入需要的程辑包：grid
help(Arthritis) #阅读数据集Arthritis的描述
Arthritis 
example(Arthritis)# 运行数据集Arthritis自带的示例</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-12-1.png" width="672" /><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-12-2.png" width="672" /></p>
<pre class="r"><code>#q()</code></pre>
</div>
